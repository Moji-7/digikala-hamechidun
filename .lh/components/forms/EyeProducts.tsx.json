{
    "sourceFile": "components/forms/EyeProducts.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 17,
            "patches": [
                {
                    "date": 1708342967462,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1708343341300,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,20 +12,19 @@\n \r\n \r\n \r\n \r\n-// interface Props {\r\n-//     eyeProductParam: EyeProductParams;\r\n-// }\r\n+interface Props {\r\n+    eyeProductParam: EyeProductParams;\r\n+}\r\n \r\n-const EyeProducts: React.FC = () => {\r\n+const EyeProducts: React.FC<Props> = ({eyeProductParam}) => {\r\n     const { theme } = useTheme();\r\n     const queryClient = useQueryClient();\r\n \r\n     const { data, error, isLoading, isError, deleteMutation, addMutation } = useEyeProduct(eyeProductParam, queryClient);\r\n \r\n \r\n-    const [page, setPage] = useState(1);\r\n     const handleDelete = async (event, productId: number) => {\r\n         event.preventDefault()\r\n         try {\r\n             const result = await deleteMutation.mutateAsync(productId);\r\n@@ -45,25 +44,25 @@\n         </View>\r\n     );\r\n \r\n \r\n-return (\r\n-    <View style={styles.container}>\r\n-        {data && (\r\n-            <View style={styles.gridContainer}>\r\n-                {data.eyeProducts.map((eyeProduct, index) => (\r\n-                    <View key={index} style={styles.gridRow}>\r\n-                        {renderGridItem(eyeProduct, index)}\r\n-                    </View>\r\n-                ))}\r\n-            </View>\r\n-        )}\r\n-    </View>\r\n-);\r\n+    return (\r\n+        <View style={styles.container}>\r\n+            {data && (\r\n+                <View style={styles.gridContainer}>\r\n+                    {data.eyeProducts.map((eyeProduct, index) => (\r\n+                        <View key={index} style={styles.gridRow}>\r\n+                            {renderGridItem(eyeProduct, index)}\r\n+                        </View>\r\n+                    ))}\r\n+                </View>\r\n+            )}\r\n+        </View>\r\n+    );\r\n \r\n-      }        \r\n-                       \r\n+}\r\n \r\n+\r\n const styles = StyleSheet.create({\r\n     container: {\r\n         flex: 1,\r\n         padding: 6,\r\n"
                },
                {
                    "date": 1708343511707,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,8 +8,9 @@\n import { Pagination } from 'react-native-pagination';\r\n import { Alert } from 'react-native';\r\n import AlertComponenti from '../uicomponents/AlertComponent';\r\n import EyeProductAddComponent from './EyeProductAdd';\r\n+import { useSelector } from 'react-redux';\r\n \r\n \r\n \r\n \r\n@@ -22,9 +23,9 @@\n     const queryClient = useQueryClient();\r\n \r\n     const { data, error, isLoading, isError, deleteMutation, addMutation } = useEyeProduct(eyeProductParam, queryClient);\r\n \r\n-\r\n+    useSelector((state) => state.eyeProducts)\r\n     const handleDelete = async (event, productId: number) => {\r\n         event.preventDefault()\r\n         try {\r\n             const result = await deleteMutation.mutateAsync(productId);\r\n@@ -46,8 +47,9 @@\n \r\n \r\n     return (\r\n         <View style={styles.container}>\r\n+             {JSON.stringify(useSelector((state) => state.eyeProducts), null, 2)}\r\n             {data && (\r\n                 <View style={styles.gridContainer}>\r\n                     {data.eyeProducts.map((eyeProduct, index) => (\r\n                         <View key={index} style={styles.gridRow}>\r\n"
                },
                {
                    "date": 1708344147391,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,15 +17,15 @@\n interface Props {\r\n     eyeProductParam: EyeProductParams;\r\n }\r\n \r\n-const EyeProducts: React.FC<Props> = ({eyeProductParam}) => {\r\n+const EyeProducts: React.FC<Props> = ({ eyeProductParam }) => {\r\n     const { theme } = useTheme();\r\n     const queryClient = useQueryClient();\r\n \r\n     const { data, error, isLoading, isError, deleteMutation, addMutation } = useEyeProduct(eyeProductParam, queryClient);\r\n \r\n-    useSelector((state) => state.eyeProducts)\r\n+    const eyeProductsItems = useSelector((state) => state.eyeProducts))\r\n     const handleDelete = async (event, productId: number) => {\r\n         event.preventDefault()\r\n         try {\r\n             const result = await deleteMutation.mutateAsync(productId);\r\n@@ -47,21 +47,49 @@\n \r\n \r\n     return (\r\n         <View style={styles.container}>\r\n-             {JSON.stringify(useSelector((state) => state.eyeProducts), null, 2)}\r\n-            {data && (\r\n-                <View style={styles.gridContainer}>\r\n-                    {data.eyeProducts.map((eyeProduct, index) => (\r\n-                        <View key={index} style={styles.gridRow}>\r\n-                            {renderGridItem(eyeProduct, index)}\r\n-                        </View>\r\n+\r\n+\r\n+            {eyeProductsItems.length > 0 && ( // Render when products exist\r\n+                <>\r\n+                    <Text>ü§ëüêæ Selected Products: ü§ëüêæ  </Text>\r\n+                    {/* <EyeProductAddButton /> */}\r\n+                    {eyeProductsItems.map((eyeProduct, index) => (\r\n+\r\n+                        <ListItem key={eyeProduct.id}>\r\n+                            <ListItem.Content>\r\n+                                <ListItem.Title>{eyeProduct.titleFa}</ListItem.Title>\r\n+                                <ListItem.Subtitle>{eyeProduct.pipelinesIds} |\r\n+                                    {/* {product.default_variant.price.selling_price} |\r\n+                  {product.default_variant.price.rrp_price} |\r\n+                  {product.default_variant.price.discount_percent}% */}\r\n+                                </ListItem.Subtitle>\r\n+                                <ListItem.Subtitle>\r\n+                                    <Button onPress={() => handleDelete(eyeProduct.id)} title='remove' />\r\n+                                </ListItem.Subtitle>\r\n+                            </ListItem.Content>\r\n+                        </ListItem>\r\n+\r\n                     ))}\r\n-                </View>\r\n+                </>\r\n             )}\r\n+\r\n+\r\n         </View>\r\n-    );\r\n \r\n+        //     {data && (\r\n+        //         <View style={styles.gridContainer}>\r\n+        //             {data.eyeProducts.map((eyeProduct, index) => (\r\n+        //                 <View key={index} style={styles.gridRow}>\r\n+        //                     {renderGridItem(eyeProduct, index)}\r\n+        //                 </View>\r\n+        //             ))}\r\n+        //         </View>\r\n+        //     )}\r\n+        // </View>\r\n+  \r\n+\r\n }\r\n \r\n \r\n const styles = StyleSheet.create({\r\n"
                },
                {
                    "date": 1708344192731,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -59,11 +59,8 @@\n                         <ListItem key={eyeProduct.id}>\r\n                             <ListItem.Content>\r\n                                 <ListItem.Title>{eyeProduct.titleFa}</ListItem.Title>\r\n                                 <ListItem.Subtitle>{eyeProduct.pipelinesIds} |\r\n-                                    {/* {product.default_variant.price.selling_price} |\r\n-                  {product.default_variant.price.rrp_price} |\r\n-                  {product.default_variant.price.discount_percent}% */}\r\n                                 </ListItem.Subtitle>\r\n                                 <ListItem.Subtitle>\r\n                                     <Button onPress={() => handleDelete(eyeProduct.id)} title='remove' />\r\n                                 </ListItem.Subtitle>\r\n@@ -87,9 +84,9 @@\n         //         </View>\r\n         //     )}\r\n         // </View>\r\n   \r\n-\r\n+    )\r\n }\r\n \r\n \r\n const styles = StyleSheet.create({\r\n"
                },
                {
                    "date": 1708344511533,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -61,9 +61,9 @@\n                                 <ListItem.Title>{eyeProduct.titleFa}</ListItem.Title>\r\n                                 <ListItem.Subtitle>{eyeProduct.pipelinesIds} |\r\n                                 </ListItem.Subtitle>\r\n                                 <ListItem.Subtitle>\r\n-                                    <Button onPress={() => handleDelete(eyeProduct.id)} title='remove' />\r\n+                                    <Button onPress={(e) => handleDelete(e,eyeProduct.id)} title='remove' />\r\n                                 </ListItem.Subtitle>\r\n                             </ListItem.Content>\r\n                         </ListItem>\r\n \r\n"
                },
                {
                    "date": 1708344526999,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -49,30 +49,10 @@\n     return (\r\n         <View style={styles.container}>\r\n \r\n \r\n-            {eyeProductsItems.length > 0 && ( // Render when products exist\r\n-                <>\r\n-                    <Text>ü§ëüêæ Selected Products: ü§ëüêæ  </Text>\r\n-                    {/* <EyeProductAddButton /> */}\r\n-                    {eyeProductsItems.map((eyeProduct, index) => (\r\n+ \r\n \r\n-                        <ListItem key={eyeProduct.id}>\r\n-                            <ListItem.Content>\r\n-                                <ListItem.Title>{eyeProduct.titleFa}</ListItem.Title>\r\n-                                <ListItem.Subtitle>{eyeProduct.pipelinesIds} |\r\n-                                </ListItem.Subtitle>\r\n-                                <ListItem.Subtitle>\r\n-                                    <Button onPress={(e) => handleDelete(e,eyeProduct.id)} title='remove' />\r\n-                                </ListItem.Subtitle>\r\n-                            </ListItem.Content>\r\n-                        </ListItem>\r\n-\r\n-                    ))}\r\n-                </>\r\n-            )}\r\n-\r\n-\r\n         </View>\r\n \r\n         //     {data && (\r\n         //         <View style={styles.gridContainer}>\r\n"
                },
                {
                    "date": 1708344563133,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -23,9 +23,9 @@\n     const queryClient = useQueryClient();\r\n \r\n     const { data, error, isLoading, isError, deleteMutation, addMutation } = useEyeProduct(eyeProductParam, queryClient);\r\n \r\n-    const eyeProductsItems = useSelector((state) => state.eyeProducts))\r\n+    const eyeProductsItems = useSelector((state) => state.eyeProducts)\r\n     const handleDelete = async (event, productId: number) => {\r\n         event.preventDefault()\r\n         try {\r\n             const result = await deleteMutation.mutateAsync(productId);\r\n@@ -49,10 +49,30 @@\n     return (\r\n         <View style={styles.container}>\r\n \r\n \r\n- \r\n+            {eyeProductsItems.length > 0 && ( // Render when products exist\r\n+                <>\r\n+                    <Text>ü§ëüêæ Selected Products: ü§ëüêæ  </Text>\r\n+                    {/* <EyeProductAddButton /> */}\r\n+                    {eyeProductsItems.map((eyeProduct, index) => (\r\n \r\n+                        <ListItem key={eyeProduct.id}>\r\n+                            <ListItem.Content>\r\n+                                <ListItem.Title>{eyeProduct.titleFa}</ListItem.Title>\r\n+                                <ListItem.Subtitle>{eyeProduct.pipelinesIds} |\r\n+                                </ListItem.Subtitle>\r\n+                                <ListItem.Subtitle>\r\n+                                    <Button onPress={(e) => handleDelete(e,eyeProduct.id)} title='remove' />\r\n+                                </ListItem.Subtitle>\r\n+                            </ListItem.Content>\r\n+                        </ListItem>\r\n+\r\n+                    ))}\r\n+                </>\r\n+            )}\r\n+\r\n+\r\n         </View>\r\n \r\n         //     {data && (\r\n         //         <View style={styles.gridContainer}>\r\n"
                },
                {
                    "date": 1708344622288,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,10 +47,10 @@\n \r\n \r\n     return (\r\n         <View style={styles.container}>\r\n+   {JSON.stringify(useSelector((state) => state.eyeProducts), null, 2)}\r\n \r\n-\r\n             {eyeProductsItems.length > 0 && ( // Render when products exist\r\n                 <>\r\n                     <Text>ü§ëüêæ Selected Products: ü§ëüêæ  </Text>\r\n                     {/* <EyeProductAddButton /> */}\r\n"
                },
                {
                    "date": 1708345269440,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,9 +53,9 @@\n             {eyeProductsItems.length > 0 && ( // Render when products exist\r\n                 <>\r\n                     <Text>ü§ëüêæ Selected Products: ü§ëüêæ  </Text>\r\n                     {/* <EyeProductAddButton /> */}\r\n-                    {eyeProductsItems.map((eyeProduct, index) => (\r\n+                    {eyeProductsItems[0].map((eyeProduct, index) => (\r\n \r\n                         <ListItem key={eyeProduct.id}>\r\n                             <ListItem.Content>\r\n                                 <ListItem.Title>{eyeProduct.titleFa}</ListItem.Title>\r\n"
                },
                {
                    "date": 1708345304956,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -23,9 +23,9 @@\n     const queryClient = useQueryClient();\r\n \r\n     const { data, error, isLoading, isError, deleteMutation, addMutation } = useEyeProduct(eyeProductParam, queryClient);\r\n \r\n-    const eyeProductsItems = useSelector((state) => state.eyeProducts)\r\n+    const eyeProductsItems = useSelector((state) => state.eyeProducts.eyeProducts)\r\n     const handleDelete = async (event, productId: number) => {\r\n         event.preventDefault()\r\n         try {\r\n             const result = await deleteMutation.mutateAsync(productId);\r\n"
                },
                {
                    "date": 1708345327134,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -23,9 +23,9 @@\n     const queryClient = useQueryClient();\r\n \r\n     const { data, error, isLoading, isError, deleteMutation, addMutation } = useEyeProduct(eyeProductParam, queryClient);\r\n \r\n-    const eyeProductsItems = useSelector((state) => state.eyeProducts.eyeProducts)\r\n+    const eyeProductsItems = useSelector((state) => state.eyeProducts)\r\n     const handleDelete = async (event, productId: number) => {\r\n         event.preventDefault()\r\n         try {\r\n             const result = await deleteMutation.mutateAsync(productId);\r\n"
                },
                {
                    "date": 1708345364596,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -23,9 +23,9 @@\n     const queryClient = useQueryClient();\r\n \r\n     const { data, error, isLoading, isError, deleteMutation, addMutation } = useEyeProduct(eyeProductParam, queryClient);\r\n \r\n-    const eyeProductsItems = useSelector((state) => state.eyeProducts)\r\n+    const eyeProductsItems = useSelector((state) => state.eyeProducts.eyeProducts)\r\n     const handleDelete = async (event, productId: number) => {\r\n         event.preventDefault()\r\n         try {\r\n             const result = await deleteMutation.mutateAsync(productId);\r\n"
                },
                {
                    "date": 1708345376879,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,9 +53,9 @@\n             {eyeProductsItems.length > 0 && ( // Render when products exist\r\n                 <>\r\n                     <Text>ü§ëüêæ Selected Products: ü§ëüêæ  </Text>\r\n                     {/* <EyeProductAddButton /> */}\r\n-                    {eyeProductsItems[0].map((eyeProduct, index) => (\r\n+                    {eyeProductsItems.map((eyeProduct, index) => (\r\n \r\n                         <ListItem key={eyeProduct.id}>\r\n                             <ListItem.Content>\r\n                                 <ListItem.Title>{eyeProduct.titleFa}</ListItem.Title>\r\n"
                },
                {
                    "date": 1708347461838,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,8 +9,9 @@\n import { Alert } from 'react-native';\r\n import AlertComponenti from '../uicomponents/AlertComponent';\r\n import EyeProductAddComponent from './EyeProductAdd';\r\n import { useSelector } from 'react-redux';\r\n+import { useDeleteItemMutation } from '../reduxApi/api';\r\n \r\n \r\n \r\n \r\n@@ -21,17 +22,18 @@\n const EyeProducts: React.FC<Props> = ({ eyeProductParam }) => {\r\n     const { theme } = useTheme();\r\n     const queryClient = useQueryClient();\r\n \r\n-    const { data, error, isLoading, isError, deleteMutation, addMutation } = useEyeProduct(eyeProductParam, queryClient);\r\n+    const [deleteItem, { isLoading, isError, error }] = useDeleteItemMutation();\r\n \r\n     const eyeProductsItems = useSelector((state) => state.eyeProducts.eyeProducts)\r\n     const handleDelete = async (event, productId: number) => {\r\n         event.preventDefault()\r\n         try {\r\n-            const result = await deleteMutation.mutateAsync(productId);\r\n-            console.log('Delete successful', result);\r\n-        } catch (error) {\r\n+            await deleteItem(productId);\r\n+            // Handle success (e.g., show a notification)\r\n+        } catch (err) {\r\n+            // Handle error (e.g., show an error message)\r\n             console.error('Delete failed', error);\r\n         }\r\n     };\r\n \r\n"
                },
                {
                    "date": 1708347472208,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,9 +24,10 @@\n     const queryClient = useQueryClient();\r\n \r\n     const [deleteItem, { isLoading, isError, error }] = useDeleteItemMutation();\r\n \r\n-    const eyeProductsItems = useSelector((state) => state.eyeProducts.eyeProducts)\r\n+    const eyeProductsItems = useSelector((state) => state.eyeProducts.eyeProducts\r\n+    //delete\r\n     const handleDelete = async (event, productId: number) => {\r\n         event.preventDefault()\r\n         try {\r\n             await deleteItem(productId);\r\n"
                },
                {
                    "date": 1708347513162,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,9 +24,10 @@\n     const queryClient = useQueryClient();\r\n \r\n     const [deleteItem, { isLoading, isError, error }] = useDeleteItemMutation();\r\n \r\n-    const eyeProductsItems = useSelector((state) => state.eyeProducts.eyeProducts\r\n+    const eyeProductsItems = useSelector((state) => state.eyeProducts.eyeProducts)\r\n+    \r\n     //delete\r\n     const handleDelete = async (event, productId: number) => {\r\n         event.preventDefault()\r\n         try {\r\n@@ -35,8 +36,9 @@\n         } catch (err) {\r\n             // Handle error (e.g., show an error message)\r\n             console.error('Delete failed', error);\r\n         }\r\n+    \r\n     };\r\n \r\n     const renderGridItem = (eyeProduct: EyeProduct, index: number) => (\r\n         <View style={styles.gridItem} key={index}>\r\n"
                },
                {
                    "date": 1708348004408,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -39,19 +39,8 @@\n         }\r\n     \r\n     };\r\n \r\n-    const renderGridItem = (eyeProduct: EyeProduct, index: number) => (\r\n-        <View style={styles.gridItem} key={index}>\r\n-            <Text style={styles.gridItemTitle}>{eyeProduct.productTitle}</Text>\r\n-            <Text style={styles.gridItemInfo}>{eyeProduct.info}</Text>\r\n-            <Button onPress={(e) => handleDelete(e, eyeProduct.productId)} key={eyeProduct.productId} title={'Delete'}\r\n-                color={theme.myColors.danger}\r\n-            />\r\n-        </View>\r\n-    );\r\n-\r\n-\r\n     return (\r\n         <View style={styles.container}>\r\n    {JSON.stringify(useSelector((state) => state.eyeProducts), null, 2)}\r\n \r\n@@ -75,9 +64,8 @@\n                     ))}\r\n                 </>\r\n             )}\r\n \r\n-\r\n         </View>\r\n \r\n         //     {data && (\r\n         //         <View style={styles.gridContainer}>\r\n"
                }
            ],
            "date": 1708342967462,
            "name": "Commit-0",
            "content": "import React, { useState } from 'react';\r\nimport { View, Text, StyleSheet, Linking, FlatList } from 'react-native';\r\nimport { Card, ListItem, Divider, useTheme, Button } from '@rneui/themed';\r\nimport { useEyeProduct } from '../hooks/useEyeOnProduct';\r\nimport { EyeProduct, EyeProductParams } from '../entity/Eye.dto';\r\nimport { useQueryClient } from '@tanstack/react-query';\r\n\r\nimport { Pagination } from 'react-native-pagination';\r\nimport { Alert } from 'react-native';\r\nimport AlertComponenti from '../uicomponents/AlertComponent';\r\nimport EyeProductAddComponent from './EyeProductAdd';\r\n\r\n\r\n\r\n\r\n// interface Props {\r\n//     eyeProductParam: EyeProductParams;\r\n// }\r\n\r\nconst EyeProducts: React.FC = () => {\r\n    const { theme } = useTheme();\r\n    const queryClient = useQueryClient();\r\n\r\n    const { data, error, isLoading, isError, deleteMutation, addMutation } = useEyeProduct(eyeProductParam, queryClient);\r\n\r\n\r\n    const [page, setPage] = useState(1);\r\n    const handleDelete = async (event, productId: number) => {\r\n        event.preventDefault()\r\n        try {\r\n            const result = await deleteMutation.mutateAsync(productId);\r\n            console.log('Delete successful', result);\r\n        } catch (error) {\r\n            console.error('Delete failed', error);\r\n        }\r\n    };\r\n\r\n    const renderGridItem = (eyeProduct: EyeProduct, index: number) => (\r\n        <View style={styles.gridItem} key={index}>\r\n            <Text style={styles.gridItemTitle}>{eyeProduct.productTitle}</Text>\r\n            <Text style={styles.gridItemInfo}>{eyeProduct.info}</Text>\r\n            <Button onPress={(e) => handleDelete(e, eyeProduct.productId)} key={eyeProduct.productId} title={'Delete'}\r\n                color={theme.myColors.danger}\r\n            />\r\n        </View>\r\n    );\r\n\r\n\r\nreturn (\r\n    <View style={styles.container}>\r\n        {data && (\r\n            <View style={styles.gridContainer}>\r\n                {data.eyeProducts.map((eyeProduct, index) => (\r\n                    <View key={index} style={styles.gridRow}>\r\n                        {renderGridItem(eyeProduct, index)}\r\n                    </View>\r\n                ))}\r\n            </View>\r\n        )}\r\n    </View>\r\n);\r\n\r\n      }        \r\n                       \r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        padding: 6,\r\n    },\r\n    gridContainer: {\r\n        flexDirection: 'row',\r\n        flexWrap: 'wrap',\r\n    },\r\n    gridRow: {\r\n        flexDirection: 'row',\r\n        justifyContent: 'space-between',\r\n        marginBottom: 6,\r\n    },\r\n    gridItem: {\r\n        //width: '48%', // Adjust based on GRID_COLUMN_COUNT and desired proportions\r\n        padding: 8,\r\n        marginRight: 2,\r\n        borderRadius: 5,\r\n        borderWidth: 1,\r\n        borderColor: '#ddd',\r\n    },\r\n    gridItemTitle: {\r\n        fontWeight: 'bold',\r\n        fontSize: 18,\r\n        marginBottom: 4,\r\n    },\r\n    gridItemInfo: {\r\n        fontSize: 16,\r\n        marginBottom: 8,\r\n    },\r\n    gridItemCreatedAt: {\r\n        fontSize: 14,\r\n        color: '#888',\r\n    },\r\n    loading: {\r\n        fontSize: 20,\r\n        fontWeight: \"bold\",\r\n    },\r\n    error: {\r\n        fontSize: 20,\r\n        fontWeight: \"bold\",\r\n    },\r\n});\r\n\r\nexport default EyeProducts;"
        }
    ]
}